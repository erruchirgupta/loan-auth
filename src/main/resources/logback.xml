<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<property scope="context" resource="application.properties" />
	<appender name="CONSOLE"
		class="ch.qos.logback.core.ConsoleAppender">
		<layout>
			<Pattern>[%date{yyyy-MM-dd HH:mm:ss.SSS}] [%X{appname}] [%X{scenario}] [%thread][%X{correlationId}] [%X{traceId}] [%-5level] %logger{4}:%msg%n %ex</Pattern>
		</layout>
	</appender>
	<if condition='property("graylog.enabled").contains("true")'>
		<then>
			<appender name="GELF"
				class="me.moocar.logbackgelf.GelfUDPAppender">
				<remoteHost>localhost</remoteHost>
				<port>12201</port>
				<encoder class="me.moocar.logbackgelf.GZIPEncoder">
					<layout class="me.moocar.logbackgelf.GelfLayout">
						<useLoggerName>true</useLoggerName>
						<includeFullMDC>true</includeFullMDC>
						<staticField class="me.moocar.logbackgelf.Field">
							<key>_application</key>
							<value>${APP_NAME}</value>
						</staticField>
					</layout>
				</encoder>
			</appender>
		</then>
	</if>

	 <!--<root level="INFO"> <appender-ref ref="CONSOLE"/> <appende-ref ref="GELF" 
		/> </root> -->

	<if condition='property("graylog.enabled").contains("true")'>
		<then>
			<root level="INFO">
				<appender-ref ref="GELF" />
				<appender-ref ref="CONSOLE" />
			</root>
		</then>
		<else>
			<root level="INFO" >
				<appender-ref ref="CONSOLE" />
			</root>
			  
		</else>
	</if>

</configuration>